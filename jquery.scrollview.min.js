/*!
 * scrollview.js
 * @copyright 2018 AJgarden
 * ##### Author: Jia #####
 * ##### Update: 2018/11/05 #####
 */
$.fn.scrollView=function(s){var a=$(this);if("destroy"===s)a.removeAttr("data-scroll-view");else{a.attr("data-scroll-view","init");var e=$.extend({},{start:"default",end:null,threshold:-200,addClass:"scroll-view",repeat:!1,onInit:function(s){return!1},onChange:function(s){return!1},onAddClass:function(s){return!1},onRemoveClass:function(s){return!1}},s);a.each(function(s,a){var n=$(a);e.onInit.call(this,n)}),$(window).on("scroll",function(){var s=$(window).scrollTop();a.each(function(n,o){if("init"===a.attr("data-scroll-view")){var t=$(o);if(0==t.hasClass("scroll-view")){if("default"===e.start)var l=t.offset().top-$(window).height();else if("string"==typeof e.start)l=$(e.start).offset().top-$(window).height();else l=e.start;if(1==e.repeat)if(null!=e.end){if("string"==typeof e.end)var d=$(e.end).offset().top+$(e.end).outerHeight()-$(window).height();else d=e.end;s+e.threshold>=l&&s+e.threshold<=d&&("function"==typeof e.onChange&&"function"==typeof e.onAddClass?(t.addClass(e.addClass),e.onAddClass.call(this,t),e.onChange.call(this,t)):"function"==typeof e.onChange?(t.addClass(e.addClass),e.onChange.call(this,t)):"function"==typeof e.onAddClass?(t.addClass(e.addClass),e.onAddClass.call(this,t)):t.addClass(e.addClass))}else s+e.threshold>=l&&("function"==typeof e.onChange&&"function"==typeof e.onAddClass?(t.addClass(e.addClass),e.onAddClass.call(this,t),e.onChange.call(this,t)):"function"==typeof e.onChange?(t.addClass(e.addClass),e.onChange.call(this,t)):"function"==typeof e.onAddClass?(t.addClass(e.addClass),e.onAddClass.call(this,t)):t.addClass(e.addClass));else s+e.threshold>=l&&("function"==typeof e.onChange&&"function"==typeof e.onAddClass?(t.addClass(e.addClass),e.onAddClass.call(this,t),e.onChange.call(this,t)):"function"==typeof e.onChange?(t.addClass(e.addClass),e.onChange.call(this,t)):"function"==typeof e.onAddClass?(t.addClass(e.addClass),e.onAddClass.call(this,t)):t.addClass(e.addClass))}else if(1==e.repeat){if("default"===e.start)l=t.offset().top-$(window).height();else if("string"==typeof e.start)l=$(e.start).offset().top-$(window).height();else l=e.start;if(null!=e.end){if("string"==typeof e.end)d=$(e.end).offset().top+$(e.end).outerHeight()-$(window).height();else d=e.end;(s+e.threshold<l||s+e.threshold>d)&&("function"==typeof e.onChange&&"function"==typeof e.onRemoveClass?(t.removeClass(e.addClass),e.onRemoveClass.call(this,t),e.onChange.call(this,t)):"function"==typeof e.onChange?(t.removeClass(e.addClass),e.onChange.call(this,t)):"function"==typeof e.onRemoveClass?(t.removeClass(e.addClass),e.onRemoveClass.call(this,t)):t.removeClass(e.addClass))}else s+e.threshold<l&&("function"==typeof e.onChange&&"function"==typeof e.onRemoveClass?(t.removeClass(e.addClass),e.onRemoveClass.call(this,t),e.onChange.call(this,t)):"function"==typeof e.onChange?(t.removeClass(e.addClass),e.onChange.call(this,t)):"function"==typeof e.onRemoveClass?(t.removeClass(e.addClass),e.onRemoveClass.call(this,t)):t.removeClass(e.addClass))}}})}).trigger("scroll"),$(window).on("resize",function(){$(this).trigger("scroll")})}};